# 1. Chaves, Portas Lógicas, Circuitos Combinacionais

O objetivo deste workshop é a construção de um retro computador (mais ou menos equivalente
ao que as pessoas comprariam para ter em casa no início dos anos 1990) chamado Pegasus 42
e usá-lo para programar uns jogos simples. A idéia é que o projeto possa ser completamente
entendido desde o nível mais baixo até o sistema em geral.

Para isso usaremos inicialmente um simulador, e depois passaremos as usar uma FPGA (
Field Programmable Gate Array - um chip que pode ser reconfigurado para implementar
qualquer circuito digital). Para cada nível de abstração existem vários simuladores
que podemos usar. De um alto nível para baixo nível temos:

| Nível | Exemplo de Simuladores |
|-------|--------------------|
| Arquitetura | QEMU, MAME |
| Micro-arquitetura | SPIM, SimpleScalar |
| Transferência de Registradores | Verilator, ModelSim |
| Portas Lógicas | Digital, TkGate |
| Chaves | IRSIM, MOSSIM |
| Circuitos Analógicos | Spice, Xyce |
| Componentes | TCAD, DEVSIM |
| Física | Elmer, Matlab |

A vantagem de se usar um simulador ao invés do produto de verdade é poder ver
detalhes que seriam muito difíceis, senão impossível, de medir no circuito
real. Os simuladores de baixo nível mostram muito mais detalhes que os de alto
nível, mas são proporcionalmente mais lentos quando executados num mesmo computador.
Por isso apesar de ser possível simulador um computador completo usando o Spice,
talvez level minutos para o circuito simulado executar uma única instrução. Podemos
ter que esperar semanas para saber se ele carrega o sistema operacional ou não.
Normalmente usamos os simuladores de baixo nível para pequenos trechos do projeto
e simuladores de mais alto nível para o sistema completo.

Quando dissemos que o objetivo era entender o Pegasus 42 ao nível mais baixo
exageramos um pouco. Vamos considerar o nível de chaves como sendo o mais baixo
neste workshop. Apesar do Digital não ser otimizado para este nível, ele é suficiente
para ilustrar as idéias que serão apresentas em seguida. Ele também não é otimizado
para os níveis mais altos, mas para os projetos reduzidos que serão estudados ele
é suficiente (mas é lento demais para mostrar a operação de circuitos que geram
vídeo de maneira usável).

![system](../fig/1.01.sys.svg)

Uma representação abstrata de um sistema é um retêngulo com um número de entradas
e algumas saídas. Normalmente mostraremos as entradas vindo da esquerda e as saídas
indo para a direita, mas podemos ignorar esta regra se estiver deixando o desenho
mais confuso.

## Digital ou Analógica

A primeira escolha que precisamos fazer é a natureza das entradas e saídas do nosso
sistema. Nas entradas e saídas analógicas algum valor do nosso circuito (tensão, corrente, etc) é
análogo a algum valor do mundo (temperatura, brilho, etc). Nas entradas e saídas digitais
uma série de valores do circuito representam um único valor do mundo. Esta série pode
usar entradas ou saídas separadas (representação paralela) ou uma mesma entrada ou saída
ao longo do tempo (representação serial).

| característica | Analógico | Digital |
|----------------|-----------|---------|
| número de circuitos | um | um por dígito |
| precisão | depende da qualidade do circuito  | sempre igual ao número de digitos |
| ruído    | acumula a cada operação    | não passa da entrada para saída |

Os circuitos analógicos dominaram a computação até a metade do século 20, e a telecomunicação
até o fim do século 20. O fator mais importante era o número de circuitos já que os componentes
eram muito caros e a ligação deles um processo manual. Com a evolução dos circuitos integrados
o custo passou a ser muito baixo e os outros fatores levaram à digitalização da tecnologia.
Nosso projeto é digital.

A humanidade tem usado vários sistemas digitais diferentes para representar números, sendo
o mais popular o sistema posicional decimal com digitos indu-arábicos. Quanto mais valores
cada dígito pode ter, mas sensível fica aos ruídos. Mas quanto menos valores cada digito poder
ter, mais dígitos são necessários para representar o mesmo número. A melhor proteção possível
contra o ruído é quando cada dígito pode ter apenas 2 valores, como no sistema posicional binário.

Apesar do sistema binário precisar de mais dígitos (e, portanto, mais circuitos) que as alternativas,
cada circuito é mais simples de modo que é a opção que usaremos.

---

- [2. Circuitos Sequenciais](2.seq.md)
- [3. Processadores](3.cpu.md)
- [4. FPGAs e Shin JAMMA](4.fpga.md)
- [5. Vídeo e Áudio](5.av.md)
- [6. Pegasus 42](6.pegasus42.md)
- [A. História](A.hist.md)
